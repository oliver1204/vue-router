{"remainingRequest":"/Users/olifer/Documents/goooooooo/vue-router/node_modules/babel-loader/lib/index.js!/Users/olifer/Documents/goooooooo/vue-router/src/vue-router/index.js","dependencies":[{"path":"/Users/olifer/Documents/goooooooo/vue-router/src/vue-router/index.js","mtime":1613490486709},{"path":"/Users/olifer/Documents/goooooooo/vue-router/node_modules/cache-loader/dist/cjs.js","mtime":1612936944194},{"path":"/Users/olifer/Documents/goooooooo/vue-router/node_modules/babel-loader/lib/index.js","mtime":1612936944192}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9vbGlmZXIvRG9jdW1lbnRzL2dvb29vb29vby92dWUtcm91dGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL29saWZlci9Eb2N1bWVudHMvZ29vb29vb29vL3Z1ZS1yb3V0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgY3JlYXRlTWF0Y2hlciB9IGZyb20gJy4vY3JlYXRlLW1hdGNoZXInOwppbXBvcnQgSGFzaEhpc3RvcnkgZnJvbSAnLi9oaXN0b3J5L2hhc2gnOwppbXBvcnQgaW5zdGFsbCBmcm9tICcuL2luc3RhbGwnOwovKioKICog5YWl5Y+j5paH5Lu2CiAqLwoKdmFyIFZ1ZVJvdXRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gVnVlUm91dGVyKG9wdGlvbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWdWVSb3V0ZXIpOwoKICAgIC8qKgogICAgICog5bCG55So5oi35Lyg5YWl55qEIHJvdXRlcyDmiYHlubPljJblpITnkIYKICAgICAqIHsnLyc6ICdIb21lJywgL2Fib3V0OiBBYm91dCwgJy9hYm91dC9hJzogJ2EnLCAnL2Fib3V0L2InOiAnYid9CiAgICAgKi8KICAgIHRoaXMubWF0Y2hlciA9IGNyZWF0ZU1hdGNoZXIob3B0aW9ucy5yb3V0ZXMgfHwgW10pOyAvLyB2dWUg55qE6Lev55Sx5pyJM+S4re+8jOWJjeerr+eUqOWIsOeahOaciTLnp40gaGFzaCjmnKzmrKHkvb/nlKgpIGhpc3RvcnkoaDUgQVBJKQoKICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIYXNoSGlzdG9yeSh0aGlzKTsgLy8gdnVlIOmSqeWtkOWHveaVsAoKICAgIHRoaXMuYmVmb3JlRWFjaHMgPSBbXTsKICB9CgogIF9jcmVhdGVDbGFzcyhWdWVSb3V0ZXIsIFt7CiAgICBrZXk6ICJtYXRjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbWF0Y2gobG9jYXRpb24pIHsKICAgICAgLy8g5LiA5YiH5o2i5bCx5Yy56YWNCiAgICAgIHJldHVybiB0aGlzLm1hdGNoZXIubWF0Y2gobG9jYXRpb24pOwogICAgfQogIH0sIHsKICAgIGtleTogInB1c2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2gobG9jYXRpb24pIHsKICAgICAgdGhpcy5oaXN0b3J5LnRyYW5zaXRpb25Ubyhsb2NhdGlvbiwgZnVuY3Rpb24gKCkgewogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gbG9jYXRpb247CiAgICAgIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0geyp9IGFwcCAg5pyA6aG25bGCdnVl5a6e5L6LCiAgICAgKiDlrp7njrDkuKTmraXlhoXlrrnvvJoKICAgICAqIDEuIOWPluWIsOi3r+eUseeahOi3r+W+hO+8jOi/m+ihjOi3s+i9rCDlubbljLnphY3liLDlr7nlupTnmoTnu4Tku7bov5vooYzmuLLmn5MKICAgICAqIDIuIOesrOS4gOasoeWMuemFjeaIkOWKn+WQjiDpnIDopoHnm5HlkKzot6/nlLHnmoTlj5jljJbvvIzkuYvlkI7lrozmiJDlkI7nu63mk43kvZwKICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJpbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGFwcCkgewogICAgICB2YXIgaGlzdG9yeSA9IHRoaXMuaGlzdG9yeTsKCiAgICAgIHZhciBzZXR1cExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldHVwTGlzdGVuZXJzKCkgewogICAgICAgIC8vIOi3s+i9rOaIkOWKn+WQjueahOWbnuiwgwogICAgICAgIGhpc3Rvcnkuc2V0dXBMaXN0ZW5lcnMoKTsgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyW55qE5pa55rOVICDniLYKICAgICAgfTsgLy8g54i2CgoKICAgICAgaGlzdG9yeS50cmFuc2l0aW9uVG8oaGlzdG9yeS5nZXRDdXJyZW50TG9jYXRpb24oKSwgLy8g6I635Y+W5b2T5YmN6Lev5b6EIOWtkAogICAgICBzZXR1cExpc3RlbmVycyk7CiAgICAgIGhpc3RvcnkubGlzdGVuKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgIC8vIOiuoumYhSDnrYnot6/lvoTkuIDlj5jljJblsLHmiafooYzmraTmlrnms5UKICAgICAgICBhcHAuX3JvdXRlID0gcm91dGU7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJlZm9yZUVhY2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJlZm9yZUVhY2goY2IpIHsKICAgICAgdGhpcy5iZWZvcmVFYWNocy5wdXNoKGNiKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBWdWVSb3V0ZXI7Cn0oKTsKCmV4cG9ydCB7IFZ1ZVJvdXRlciBhcyBkZWZhdWx0IH07ClZ1ZVJvdXRlci5pbnN0YWxsID0gaW5zdGFsbDs="},{"version":3,"sources":["/Users/olifer/Documents/goooooooo/vue-router/src/vue-router/index.js"],"names":["createMatcher","HashHistory","install","VueRouter","options","matcher","routes","history","beforeEachs","location","match","transitionTo","window","hash","app","setupListeners","getCurrentLocation","listen","route","_route","cb","push"],"mappings":";;;;AAAA,SAASA,aAAT,QAA8B,kBAA9B;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA;AACA;AACA;;IACqBC,S;AACnB,qBAAYC,OAAZ,EAAqB;AAAA;;AACnB;AACJ;AACA;AACA;AACI,SAAKC,OAAL,GAAeL,aAAa,CAACI,OAAO,CAACE,MAAR,IAAkB,EAAnB,CAA5B,CALmB,CAOnB;;AACA,SAAKC,OAAL,GAAe,IAAIN,WAAJ,CAAgB,IAAhB,CAAf,CARmB,CASnB;;AACA,SAAKO,WAAL,GAAmB,EAAnB;AACD;;;;WACD,eAAMC,QAAN,EAAgB;AACd;AACA,aAAO,KAAKJ,OAAL,CAAaK,KAAb,CAAmBD,QAAnB,CAAP;AACD;;;WACD,cAAKA,QAAL,EAAe;AACb,WAAKF,OAAL,CAAaI,YAAb,CAA0BF,QAA1B,EAAoC,YAAM;AACxCG,QAAAA,MAAM,CAACH,QAAP,CAAgBI,IAAhB,GAAuBJ,QAAvB;AACD,OAFD;AAGD;AACD;AACF;AACA;AACA;AACA;AACA;;;;WACE,cAAKK,GAAL,EAAU;AACR,UAAMP,OAAO,GAAG,KAAKA,OAArB;;AAEA,UAAMQ,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B;AACAR,QAAAA,OAAO,CAACQ,cAAR,GAF2B,CAED;AAC3B,OAHD,CAHQ,CAOR;;;AACAR,MAAAA,OAAO,CAACI,YAAR,CACEJ,OAAO,CAACS,kBAAR,EADF,EACgC;AAC9BD,MAAAA,cAFF;AAKAR,MAAAA,OAAO,CAACU,MAAR,CAAe,UAACC,KAAD,EAAW;AACxB;AACAJ,QAAAA,GAAG,CAACK,MAAJ,GAAaD,KAAb;AACD,OAHD;AAID;;;WACD,oBAAWE,EAAX,EAAe;AACb,WAAKZ,WAAL,CAAiBa,IAAjB,CAAsBD,EAAtB;AACD;;;;;;SAhDkBjB,S;AAmDrBA,SAAS,CAACD,OAAV,GAAoBA,OAApB","sourcesContent":["import { createMatcher } from './create-matcher';\nimport HashHistory from './history/hash';\nimport install from './install';\n\n/**\n * 入口文件\n */\nexport default class VueRouter {\n  constructor(options) {\n    /**\n     * 将用户传入的 routes 扁平化处理\n     * {'/': 'Home', /about: About, '/about/a': 'a', '/about/b': 'b'}\n     */\n    this.matcher = createMatcher(options.routes || []);\n\n    // vue 的路由有3中，前端用到的有2种 hash(本次使用) history(h5 API)\n    this.history = new HashHistory(this);\n    // vue 钩子函数\n    this.beforeEachs = [];\n  }\n  match(location) {\n    // 一切换就匹配\n    return this.matcher.match(location);\n  }\n  push(location) {\n    this.history.transitionTo(location, () => {\n      window.location.hash = location;\n    });\n  }\n  /**\n   * @param {*} app  最顶层vue实例\n   * 实现两步内容：\n   * 1. 取到路由的路径，进行跳转 并匹配到对应的组件进行渲染\n   * 2. 第一次匹配成功后 需要监听路由的变化，之后完成后续操作\n   */\n  init(app) {\n    const history = this.history;\n\n    const setupListeners = () => {\n      // 跳转成功后的回调\n      history.setupListeners(); // 监听路由变化的方法  父\n    };\n    // 父\n    history.transitionTo(\n      history.getCurrentLocation(), // 获取当前路径 子\n      setupListeners\n    );\n\n    history.listen((route) => {\n      // 订阅 等路径一变化就执行此方法\n      app._route = route;\n    });\n  }\n  beforeEach(cb) {\n    this.beforeEachs.push(cb);\n  }\n}\n\nVueRouter.install = install;\n"]}]}